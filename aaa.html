<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown æ•°æ®å¯è§†åŒ–å·¥å…·</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .card-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #64FFDA;
            display: flex;
            align-items: center;
        }
        
        .card-title i {
            margin-right: 10px;
            font-size: 1.8rem;
        }
        
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-box {
            flex: 1;
            min-width: 250px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #64B5F6;
        }
        
        input {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        input:focus {
            outline: none;
            border-color: #64B5F6;
            box-shadow: 0 0 0 2px rgba(100, 181, 246, 0.3);
            background: rgba(0, 0, 0, 0.3);
        }
        
        button {
            background: linear-gradient(to right, #2193b0, #6dd5ed);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
            background: linear-gradient(to right, #1e7a94, #5bc0de);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        
        .markmap-container {
            background: rgba(0, 5, 20, 0.7);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            height: 500px;
            margin-top: 20px;
            position: relative;
        }
        
        .markmap {
            width: 100%;
            height: 100%;
        }
        
        .markmap svg {
            width: 100%;
            height: 100%;
        }
        
        .status {
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status.success {
            color: #76FF03;
            border-left: 4px solid #76FF03;
        }
        
        .status.error {
            color: #FF5252;
            border-left: 4px solid #FF5252;
        }
        
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            color: #64B5F6;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #64B5F6;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 20px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        @media (max-width: 768px) {
            .input-group {
                flex-direction: column;
                gap: 15px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
                justify-content: center;
            }
            
            .markmap-container {
                height: 400px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="container">
            <header>
                <h1>Markdown æ•°æ®å¯è§†åŒ–å·¥å…·</h1>
                <p class="subtitle">è¾“å…¥æ‚¨çš„å‡­è¯è·å–æ•°æ®ï¼Œå®æ—¶ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨</p>
            </header>
            
            <main>
                <div class="card">
                    <h2 class="card-title">
                        <span>ğŸ”‘ èº«ä»½éªŒè¯</span>
                    </h2>
                    
                    <div class="input-group">
                        <div class="input-box">
                            <label for="username">ç”¨æˆ·å</label>
                            <input 
                                type="text" 
                                id="username" 
                                placeholder="è¯·è¾“å…¥ç”¨æˆ·å" 
                                v-model="username"
                            >
                        </div>
                        
                        <div class="input-box">
                            <label for="password">å¯†ç </label>
                            <input 
                                type="password" 
                                id="password" 
                                placeholder="è¯·è¾“å…¥å¯†ç " 
                                v-model="password"
                            >
                        </div>
                    </div>
                    
                    <div class="button-group">
                        <button @click="fetchData">
                            <span>ğŸš€ è·å–æ•°æ®å¹¶ç”Ÿæˆå›¾è¡¨</span>
                        </button>
                        <button class="btn-secondary" @click="loadSampleData">
                            <span>âœ¨ åŠ è½½ç¤ºä¾‹æ•°æ®</span>
                        </button>
                    </div>
                    
                    <div class="status" :class="statusClass" v-if="statusMessage">
                        <span v-if="isLoading" class="loading">
                            <span class="spinner"></span>
                        </span>
                        {{ statusMessage }}
                    </div>
                </div>
                
                <div class="card">
                    <h2 class="card-title">
                        <span>ğŸ“Š æ•°æ®å¯è§†åŒ–å›¾è¡¨</span>
                    </h2>
                    
                    <div class="markmap-container">
                        <div class="markmap">
                            <script type="text/template">
                                {{ markdownContent }}
                            </script>
                        </div>
                    </div>
                </div>
            </main>
            
            <footer>
                <p>Â© 2023 æ•°æ®å¯è§†åŒ–å·¥å…· | ä½¿ç”¨ Vue3 å’Œ Markmap æ„å»º</p>
            </footer>
        </div>
    </div>

    <script>
        const { createApp, ref, reactive, onMounted } = Vue;
        
        createApp({
            setup() {
                const username = ref('');
                const password = ref('');
                const markdownContent = ref(`# ç­‰å¾…æ•°æ®åŠ è½½...
- è¯·åœ¨ä¸Šæ–¹è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
- ç„¶åç‚¹å‡»"è·å–æ•°æ®å¹¶ç”Ÿæˆå›¾è¡¨"
- æˆ–è€…ä½¿ç”¨"åŠ è½½ç¤ºä¾‹æ•°æ®"æŸ¥çœ‹ç¤ºä¾‹`);
                
                const statusMessage = ref('');
                const statusClass = ref('');
                const isLoading = ref(false);
                
                // æ¨¡æ‹Ÿä»APIè·å–æ•°æ®
                const fetchData = async () => {
                    if (!username.value || !password.value) {
                        statusMessage.value = "é”™è¯¯ï¼šè¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ";
                        statusClass.value = "error";
                        return;
                    }
                    
                    isLoading.value = true;
                    statusMessage.value = "æ­£åœ¨è¿æ¥æœåŠ¡å™¨å¹¶è·å–æ•°æ®...";
                    statusClass.value = "";
                    
                    try {
                        // æ¨¡æ‹ŸAPIè¯·æ±‚å»¶è¿Ÿ
                        await new Promise(resolve => setTimeout(resolve, 1500));
                        
                        // æ¨¡æ‹ŸæˆåŠŸå“åº”
                        const mockResponse = {
                            data: `# æ•°æ®è·å–æˆåŠŸï¼
- **ç”¨æˆ·å**: ${username.value}
- **æ—¶é—´**: ${new Date().toLocaleTimeString()}\n- **æ•°æ®æº**: å®‰å…¨API

## æ•°æ®åˆ†æç»“æœ
- ç”¨æˆ·è¡Œä¸ºåˆ†æ
  - ç™»å½•æ¬¡æ•°: 42
  - å¹³å‡ä¼šè¯æ—¶é—´: 12åˆ†é’Ÿ
- ç³»ç»Ÿæ€§èƒ½
  - å“åº”æ—¶é—´: 128ms
  - æ­£å¸¸è¿è¡Œç‡: 99.8%

## å…³é”®æŒ‡æ ‡
- æ´»è·ƒç”¨æˆ·æ•°: 1,240
- æ•°æ®ååé‡: 2.4GB/s
- é”™è¯¯ç‡: 0.12%`
                        };
                        
                        markdownContent.value = mockResponse.data;
                        statusMessage.value = "æ•°æ®è·å–æˆåŠŸï¼å›¾è¡¨å·²æ›´æ–°";
                        statusClass.value = "success";
                    } catch (error) {
                        statusMessage.value = `é”™è¯¯ï¼š${error.message || "æ— æ³•è·å–æ•°æ®"}`;
                        statusClass.value = "error";
                    } finally {
                        isLoading.value = false;
                        
                        // é‡æ–°æ¸²æŸ“markmap
                        setTimeout(renderMarkmap, 100);
                    }
                };
                
                // åŠ è½½ç¤ºä¾‹æ•°æ®
                const loadSampleData = () => {
                    username.value = "demo_user";
                    password.value = "â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢";
                    const url = 'https://packages.aliyun.com/api/protocol/664ae465dba1fd117e808412/generic/dockerimage/files/requirements/requirements.txt?version=1.2.6';
                    axios({
                    method: 'get',
                    url: url,
                    responseType: 'stream', // è®¾ç½®å“åº”ç±»å‹ä¸ºæµ
                    auth: {
                        username: username.value,
                        password: password.value,
                    },
                    })
                    .then(response => {
                        console.log(response.data);
                        // åˆ›å»ºå†™å…¥æµï¼Œå°†æ–‡ä»¶ä¿å­˜åˆ°æœ¬åœ°
                        const writer = fs.createWriteStream(outputPath);
                        response.data.pipe(writer);

                        return new Promise((resolve, reject) => {
                        writer.on('finish', resolve);
                        writer.on('error', reject);
                        });
                    })
                    .then(() => {
                        console.log('æ–‡ä»¶ä¸‹è½½æˆåŠŸ:', outputPath);
                    })
                    .catch(error => {
                        console.error('ä¸‹è½½å¤±è´¥:', error.message);
                    });
//                     markdownContent.value = `# ç¤ºä¾‹æ•°æ®ï¼šé¡¹ç›®åˆ†æ
                    
// ## é¡¹ç›®çŠ¶æ€
// - å®Œæˆåº¦: 75%
// - é¢„ç®—ä½¿ç”¨: 62%
// - æ—¶é—´çº¿: æŒ‰è®¡åˆ’

// ### å›¢é˜Ÿæ„æˆ
// - å¼€å‘äººå‘˜: 8
// - è®¾è®¡å¸ˆ: 2
// - äº§å“ç»ç†: 1
// - QAå·¥ç¨‹å¸ˆ: 2

// ## å…³é”®é‡Œç¨‹ç¢‘
// - éœ€æ±‚åˆ†æ (å·²å®Œæˆ)
// - ç³»ç»Ÿè®¾è®¡ (å·²å®Œæˆ)
// - æ ¸å¿ƒå¼€å‘
//   - åç«¯API (95%)
//   - å‰ç«¯ç•Œé¢ (70%)
//   - æ•°æ®åº“è®¾è®¡ (100%)
// - æµ‹è¯•é˜¶æ®µ
// - äº§å“å‘å¸ƒ

// ## é£é™©åˆ†æ
// - æŠ€æœ¯é£é™©: ä½
// - æ—¶é—´é£é™©: ä¸­
//   - å‰ç«¯å¼€å‘å»¶è¿Ÿ
//   - ç¬¬ä¸‰æ–¹é›†æˆé—®é¢˜
// - é¢„ç®—é£é™©: ä½`;

                    // statusMessage.value = "ç¤ºä¾‹æ•°æ®åŠ è½½æˆåŠŸï¼";
                    // statusClass.value = "success";
                    
                    // // é‡æ–°æ¸²æŸ“markmap
                    // setTimeout(renderMarkmap, 100);
                };
                
                onMounted(() => {
                    // åˆå§‹æ¸²æŸ“
                    renderMarkmap();
                });
                
                return {
                    username,
                    password,
                    markdownContent,
                    statusMessage,
                    statusClass,
                    isLoading,
                    fetchData,
                    loadSampleData
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
